# Система RAG по книгам Гарри Поттера

Этот проект реализует систему **Retrieval-Augmented Generation (RAG)** для ответов на вопросы по серии книг *«Гарри Поттер»* с использованием крупной языковой модели (LLM).

## Цель проекта

Создать интерактивную систему, позволяющую пользователям задавать вопросы о сюжете, персонажах, локациях и других деталях книг *«Гарри Поттер»* и получать **точные ответы с прямыми цитатами из текста** и **указанием источника** (название книги и номер главы). Ответы генерируются с помощью LLM и строго опираются на оригинальные тексты книг.

## Технологии

- **LLM**: Mistral AI API (бесплатная версия, например, `open-mistral-7b`)
- **Backend**: FastAPI
- **Frontend**: React
- **Векторное хранилище**: FAISS или Chroma
- **RAG-фреймворк**: LangChain (или кастомная реализация)
- **Язык текстов**: русский или английский (в зависимости от используемого источника)

## Установка

1. Создайте и активируйте виртуальное окружение (рекомендуется):
   python -m venv venv
   source venv/bin/activate  # Linux/macOS
   # или
   venv\Scripts\activate     # Windows
2. Установите зависимости:
    pip install -e .[dev]
3. Настройте переменные окружения:
    Создайте файл .env в корне проекта и укажите:
    MISTRAL_API_KEY=API_KEY
4. Установите pre-commit хуки:
    pre-commit install

## Линтеры и форматирование
В проекте используется ruff для линтинга и форматирования Python-кода:

- **Проверить код вручную**: ruff check .
- **Отформатировать код**: ruff format .

Эти проверки автоматически запускаются перед каждым коммитом благодаря pre-commit.

## Запуск из папки front или backend

для перехода внутрь папки 

cd front или cd backend

**Backend (FastAPI):**
Для полноценной полноценной работы нужно переименовать .env_example.txt => .env и поменять зависимости внутри на реальные (mistral api)

pip install -e . 

uvicorn app.main:app --reload

API будет доступно по адресу http://localhost:8000, документация — в Swagger (/docs).

**либо с помощью докер**

# Собрать образ
docker build -t harry-potter-rag .

# Запустить с API-ключом
docker run -d -p 8000:8000 --env MISTRAL_API_KEY=ключ_здесь harry-potter-rag

# Может загружаться долго, поэтому желательно посмотреть логи и ожидать сообщенй:
NFO - Индексация завершена.
INFO:     Application startup complete.

Команда
docker logs -f контейнер

Будет доступно по адресу http://localhost:8000/docs

**Frontend (React):**

Для полноценной полноценной работы нужно переименовать .env.local_example => .env.local и поменять зависимости внутри на реальные (адрес бэкенда)

npm install - установска зависимостей 
npm run dev - для запуска в режиме разработки 

**либо с помощью докер**

# Собрать образ
docker build -t tom-riddle-diary .

# Запустить контейнер
docker run -d -p 8080:80 --name diary tom-riddle-diary

Будет доступно по адресу http://localhost:8080/
